{% extends "base.html" %}
{% load i18n %}

{% block title %}{% trans "Delete question" %} {{ question.id }}{% endblock %}
{% block breadcrumb %}
  {% if request.GET.from == 'questions' %}
    <li><a href="{% url 'questions_list' %}">Questions</a></li>
  {% else %}
    <li><a href="{% url 'parameter_list' %}">Parameters</a></li>
    <li><a href="{% url 'parameter_edit' parameter.id %}">{{ parameter.id }}</a></li>
  {% endif %}
  <li aria-current="page">{% trans "Delete" %} {{ question.id }}</li>
{% endblock %}

{% block content %}
<section class="card" aria-labelledby="del-heading">
  <h2 id="del-heading">{% trans "Delete question" %} — {{ question.id }}</h2>

  <p class="muted">
    {% trans "You're about to permanently delete this question from parameter" %} <strong>{{ parameter.id }}. This action cannot be undone</strong>.
  </p>

  <article class="card" style="margin-top:.5rem">
    <h3 class="sr-only">{% trans "Question preview" %}</h3>
    <p><strong>Id:</strong> {{ question.id }}</p>
    <p><strong>{% trans "Question Text" %}:</strong> {{ question.text }}</p>
    <p><strong>{% trans "Stop question" %}:</strong>
      {% if question.is_stop_question %}{% trans "Yes" %}{% else %}{% trans "No" %}{% endif %}
    </p>
  </article>

<form method="post" action="{% if request.GET.from %}?from={{ request.GET.from }}{% endif %}" novalidate style="margin-top:1rem">
    {% csrf_token %}

    {% if can_force %}
      <p class="warning" style="color:var(--bad);margin-bottom:.5rem;">
        {% trans "This question has linked answers, examples, or motivations." %}
      </p>
      <div class="actions" style="display:flex;gap:.5rem;flex-wrap:wrap;">
        <button type="submit" name="force" value="1" class="btn btn--danger">
          ⚠️ {% trans "Force delete and remove linked data" %}
        </button>
        <a class="btn" href="{% if request.GET.from == 'questions' %}{% url 'questions_list' %}{% else %}{% url 'parameter_edit' parameter.id %}{% endif %}">
          {% trans "Cancel" %}
        </a>
      </div>
    {% else %}
      <div class="actions" style="display:flex;gap:.5rem;flex-wrap:wrap;">
        <button type="submit" class="btn btn--danger">{% trans "Delete" %}</button>
        <a class="btn" href="{% if request.GET.from == 'questions' %}{% url 'questions_list' %}{% else %}{% url 'parameter_edit' parameter.id %}{% endif %}">
          {% trans "Cancel" %}
        </a>
      </div>
    {% endif %}
  </form>

</section>
{% endblock %}
