{% extends "base.html" %}
{% block title %}Parameter lookups{% endblock %}
{% block breadcrumb %}Parameters / Lookups{% endblock %}

{% block content %}
<section class="card">
  <h2>Edit schemas and types</h2>

  <div class="grid grid-2">
    <div>
      <h3>Schemas</h3>
      <form method="post" class="grid" style="grid-template-columns:auto max-content; gap:.75rem; align-items:end; width:100%;">
        {% csrf_token %}
        <input type="hidden" name="action" value="add_schema">
        <div>
          <label>New schema</label>
          <input class="form-control" name="label" required>
        </div>
        <div>
          <button class="btn btn--primary" type="submit">Add</button>
        </div>
      </form>

      <table class="table" style="margin-top:.75rem;">
        <thead><tr><th>Existing schemas</th><th></th></tr></thead>
        <tbody>
          {% for s in schemas %}
          <tr>
            <td>{{ s.label }}</td>
            <td style="text-align: right;">
              <form method="post" style="display:inline" onsubmit="return confirm('Delete this schema?');">
                {% csrf_token %}
                <input type="hidden" name="action" value="del_schema">
                <input type="hidden" name="id" value="{{ s.id }}">
                <button class="btn btn--danger" type="submit">Delete</button>
              </form>
            </td>
          </tr>
          {% empty %}
          <tr><td colspan="2"><p class="muted">No schemas yet.</p></td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div>
      <h3>Types</h3>
      <form method="post" class="grid" style="grid-template-columns:auto max-content; gap:.75rem; align-items:end; width:100%;">
        {% csrf_token %}
        <input type="hidden" name="action" value="add_type">
        <div>
          <label>New type</label>
          <input class="form-control" name="label" required>
        </div>
        <div>
          <button class="btn btn--primary" type="submit">Add</button>
        </div>
      </form>

      <table class="table" style="margin-top:.75rem;">
        <thead><tr><th>Existing types</th><th></th></tr></thead>
        <tbody>
          {% for t in types %}
          <tr>
            <td>{{ t.label }}</td>
            <td style="text-align: right;">
              <form method="post" style="display:inline" onsubmit="return confirm('Delete this type?');">
                {% csrf_token %}
                <input type="hidden" name="action" value="del_type">
                <input type="hidden" name="id" value="{{ t.id }}">
                <button class="btn btn--danger" type="submit">Delete</button>
              </form>
            </td>
          </tr>
          {% empty %}
          <tr><td colspan="2"><p class="muted">No types yet.</p></td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</section>
{% endblock %}
