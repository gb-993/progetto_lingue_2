{% extends "base.html" %}
{% load static %}

{% block title %}Parameters DAG{% endblock %}
{% block breadcrumb %}Graphs / Parameters{% endblock %}

{% block content %}

<header class="dashboard-hero">
  <h1>Graph</h1>
</header>

<main class="card" style="padding:1rem;">
  <h3 style="margin-top:0;">Parameters DAG (active only)</h3>

  <div class="form-row" style="display:flex; gap:.75rem; flex-wrap:wrap; align-items:center;">
    <label for="lang-select" class="visually-hidden">Language</label>
    <select id="lang-select" style="min-width:14rem;">
      <option value="">Select language…</option>
      {% for l in languages %}
        <option value="{{ l.id }}" {% if preselect and preselect == l.id %}selected{% endif %}>
          {{ l.id }} — {{ l.name_full }}
        </option>
      {% endfor %}
    </select>

    <button id="btn-reload" class="btn btn--secondary" type="button">Reload</button>

    <label class="switch">
      <input type="checkbox" id="toggle-rank" checked>
      <span>Layered by rank</span>
    </label>

    <div id="meta" aria-live="polite" style="margin-left:auto;"></div>
  </div>

<div id="cy-wrap" style="width:100%; height:65vh; margin-top:1rem; border:1px solid var(--border); border-radius: var(--radius);">
  <div id="cy" style="width:100%; height:100%;"></div>
</div>



  <div id="legend" class="legend" style="margin-top:.75rem; display:flex; gap:1rem; align-items:center;">
    <span style="display:inline-flex; align-items:center; gap:.5rem;">
      <span class="box" style="width:14px; height:14px; background:#4CAF50; display:inline-block; border-radius:3px;"></span> +
    </span>
    <span style="display:inline-flex; align-items:center; gap:.5rem;">
      <span class="box" style="width:14px; height:14px; background:#E53935; display:inline-block; border-radius:3px;"></span> –
    </span>
    <span style="display:inline-flex; align-items:center; gap:.5rem;">
      <span class="box" style="width:14px; height:14px; background:#039BE5; display:inline-block; border-radius:3px;"></span> 0
    </span>
  </div>

  <p class="help" style="margin-top:.75rem;">
    Suggestions: click on a node for details; double-click to highlight adjacency; zoom with mouse/touch.
  </p>
</main>

<script src="https://unpkg.com/cytoscape@3.30.2/dist/cytoscape.min.js" crossorigin="anonymous"></script>
<script src="{% static 'js/param_graph.js' %}"></script>
{% endblock %}
