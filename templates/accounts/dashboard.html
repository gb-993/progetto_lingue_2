{% extends "base.html" %}
{% load static %}

{% block title %}Dashboard{% endblock %}
{% block breadcrumb %}Dashboard{% endblock %}

{% block content %}
<div class="container dashboard" role="main">
  <header class="dashboard-hero">
    <h1>Dashboard</h1>
  </header>

  <div class="dashboard-flex">
    <nav class="dashboard-links-grid" role="navigation" aria-label="Dashboard shortcuts">
      {# sempre visibili #}
      <a class="dash-tile" href="{% url 'language_list' %}" aria-label="Open languages">
        <span class="dash-tile-label">Languages</span>
      </a>

      <a class="dash-tile" href="{% url 'instruction' %}" aria-label="Open instruction">
        <span class="dash-tile-label">Instructions</span>
      </a>
      
      <a class="dash-tile" href="{% url 'glossary_list' %}" aria-label="Open glossary">
        <span class="dash-tile-label">Glossary</span>
      </a>

      <a class="dash-tile" href="{% url 'my_account' %}" aria-label="Open my account">
        <span class="dash-tile-label">My Account</span>
      </a>

      {% if is_admin %}
        <a class="dash-tile" href="{% url 'parameter_list' %}" aria-label="Open parameters">
          <span class="dash-tile-label">Parameters</span>
        </a>

        <a class="dash-tile" href="{% url 'parameters_graph' %}" aria-label="Open parameters graph">
          <span class="dash-tile-label">Graph</span>
        </a>


        <a class="dash-tile" href="{% url 'tablea_index' %}" aria-label="Open Table A">
          <span class="dash-tile-label">Table A</span>
        </a>

        <a class="dash-tile" href="{% url 'queries:home' %}" aria-label="Open queries">
          <span class="dash-tile-label">Queries</span>
        </a>

        <a class="dash-tile" href="{% url 'submissions_list' %}" aria-label="Open submissions">
          <span class="dash-tile-label">Submissions</span>
        </a>

        <a class="dash-tile" href="{% url 'accounts_list' %}" aria-label="Open accounts">
          <span class="dash-tile-label">Accounts</span>
        </a>
      {% endif %}
    </nav>

    {% if is_admin %}
      <aside class="card news-box collapsed" aria-labelledby="last-changes-heading">
        <h3 id="last-changes-heading">Latest changes to parameters and questions</h3>

        <ul class="list news-list">
          {% for log in recent_param_changes %}
            <li class="news-item">
              <strong>{{ log.parameter_id }}</strong>
              <span class="muted">â€” {{ log.changed_at|date:"Y-m-d H:i" }}</span><br>
              <span class="muted small">by {{ log.changed_by.name }} {{ log.changed_by.surname|default:"" }}</span>
              {% if log.recap %}
                <p class="mt-1 small">{{ log.recap }}</p>
              {% endif %}
            </li>
          {% endfor %}
        </ul>

        <div class="news-toggle-row">
          <button
            class="news-toggle-btn"
            type="button"
            aria-expanded="false"
            aria-controls="last-changes-heading"
          >
            Show more
          </button>
        </div>
      </aside>
    {% endif %}

  </div>
</div>
{% endblock %}

