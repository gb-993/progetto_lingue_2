{% extends "base.html" %}
{% block title %}Parameters Debug — {{ language.id }}{% endblock %}
{% block breadcrumb %}Languages / {{ language.id }} / Parameters Debug{% endblock %}

{% block content %}
  <h1 class="main-title">
    Parameters Debug — {{ language.name_full|default:language.id }} ({{ language.id }})
  </h1>

  <div class="toolbar" style="display:flex;gap:.5rem;flex-wrap:wrap">
    {# Torna alla pagina dati lingua: sostituisci 'language_data' con il tuo nome URL #}
    <a class="btn" href="{% url 'language_data' language.id %}">Back to language data</a>
  </div>

  <div class="card" style="overflow:auto">
    <table class="table">
      <thead>
        <tr>
          <th class="w-1ch">#</th>
          <th class="w-5ch">Label</th>
          <th>Questions</th>
          <th>Answers</th>
          <th class="w-10ch nowrap">Initial value</th>
          <th>Implicational condition(s)</th>
          <th class="w-10ch">Final value</th>
        </tr>
      </thead>
      <tbody>
        {% for r in rows %}
          <tr>
            <td>{{ r.position }}</td>
            <td><strong>{{ r.param_id }}</strong></td>

            <td>
              {% if r.questions %}
                {% for qid in r.questions %}
                  <div><code>{{ qid }}</code></div>
                {% endfor %}
              {% else %}<span class="muted">—</span>{% endif %}
            </td>

            <td>
              {% if r.answers %}
                {% for a in r.answers %}
                  <div>{{ a }}</div>
                {% endfor %}
              {% else %}<span class="muted">—</span>{% endif %}
            </td>

            <td class="num nowrap">
              {% if r.initial == '+' %}+{% elif r.initial == '-' %}-{% else %}<span class="muted"> </span>{% endif %}
            </td>

            <td>
              {% if r.cond %}
                <div><code>{{ r.cond }}</code></div>
              {% else %}<span class="muted">—</span>{% endif %}
            </td>

            <td class="num nowrap">
              {% if r.final == '+' %}+{% elif r.final == '-' %}-{% elif r.final == '0' %}0{% else %}<span class="muted"> </span>{% endif %}
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <button id="backToTop"
          class="btn btn--secondary"
          type="button"
          aria-label="Back to top"
          title="Back to top"
          style="position:fixed;right:1rem;bottom:1rem">↑</button>

  <script>
    (function(){
      const btn = document.getElementById('backToTop');
      btn?.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));
    })();
  </script>
{% endblock %}
