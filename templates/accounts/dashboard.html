{% extends "base.html" %}
{% load static %}

{% block title %}Dashboard{% endblock %}

{% block breadcrumb %}
  <a href="{% url 'dashboard' %}">Dashboard</a>
{% endblock %}

{% block content %}
<div class="container dashboard" role="main">
  <header class="dashboard-hero">
    <h1>Dashboard</h1>
    <p class="muted">Data collection and storage</p>
  </header>

  <nav class="nav-tiles" role="navigation" aria-label="Dashboard shortcuts">
    <a class="card btn tile" href="{% url 'language_list' %}" aria-label="Open languages">
      <strong>Languages</strong><span class="tile-sub">Gestisci/visualizza lingue e dati</span>
    </a>

    <a class="card btn tile" href="{% url 'parameter_list' %}" aria-label="Open parameters">
      <strong>Parameters</strong><span class="tile-sub">Definizioni e domande</span>
    </a>

    <a class="card btn tile" href="{% url 'glossary_list' %}" aria-label="Open glossary">
      <strong>Glossary</strong><span class="tile-sub">Termini e definizioni</span>
    </a>

    <a class="card btn tile" href="{% url 'tablea_index' %}" aria-label="Open Table A">
      <strong>Table A</strong><span class="tile-sub">Riepilogo parametri × lingue</span>
    </a>

    <a class="card btn tile" href="{% url 'accounts_list' %}" aria-label="Open accounts">
      <strong>Accounts</strong><span class="tile-sub">Admin &amp; Users</span>
    </a>

    <a class="card btn tile" href="{% url 'queries:home' %}" aria-label="Open queries">
      <strong>Queries</strong><span class="tile-sub">Interrogazioni al database</span>
    </a>

    <a class="card btn tile" href="{% url 'submissions_list' %}" aria-label="Open submissions">
      <strong>Submissions</strong><span class="tile-sub">Gestisci/visualizza submissions</span>
    </a>
  </nav>

  {% if is_admin and recent_param_changes %}
  <section class="card mt-2" aria-labelledby="last-changes-heading">
    <h3 id="last-changes-heading">Ultime modifiche</h3>
    <ul class="list">
      {% for log in recent_param_changes %}
        <li>
          <div>
            <strong>{{ log.parameter_id }}</strong>
            <span class="muted">— {{ log.changed_at|date:"Y-m-d H:i" }}</span>
          </div>
          <div class="muted">di {{ log.changed_by.email|default:"(utente sconosciuto)" }}</div>
          {% if log.recap %}<p class="mt-1">{{ log.recap }}</p>{% endif %}
        </li>
      {% endfor %}
    </ul>
  </section>
  {% endif %}
</div>
{% endblock %}
