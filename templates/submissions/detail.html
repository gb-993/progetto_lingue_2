{% extends "base.html" %}
{% block title %}Submission #{{ sub.id }}{% endblock %}
{% block content %}
  <h1>Submission #{{ sub.id }}</h1>
  <p>
    <strong>Language:</strong> {{ sub.language_id }} |
    <strong>User:</strong> {{ sub.submitted_by.email }} |
    <strong>Date:</strong> <time datetime="{{ sub.submitted_at|date:'c' }}">{{ sub.submitted_at|date:"Y-m-d H:i:s" }}</time>
  </p>
  {% if sub.note %}<p><strong>Nota:</strong> {{ sub.note }}</p>{% endif %}

  <h2>Parameters values</h2>
  <div class="table-responsive">
    <table class="table table-sm">
      <thead>
        <tr>
          <th scope="col">Parameter</th>
          <th scope="col">Initial value</th>
          <th scope="col">Warn (init)</th>
          <th scope="col">Final value</th>
          <th scope="col">Warn (final)</th>
        </tr>
      </thead>
      <tbody>
        {% for p in sub_params %}
          <tr>
            <td>{{ p.parameter_id }}</td>
            <td>{{ p.value_orig|default:"" }}</td>
            <td>{{ p.warning_orig|yesno:"✔," }}</td>
            <td>{{ p.value_eval|default:"" }}</td>
            <td>{{ p.warning_eval|yesno:"✔," }}</td>
          </tr>
        {% empty %}
          <tr><td colspan="5">No parameters</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <h2>Answers</h2>
  <div class="table-responsive">
    <table class="table table-sm">
      <thead>
        <tr>
          <th scope="col">Parameter</th>
          <th scope="col">Question</th>
          <th scope="col">Answer</th>
          <th scope="col">Motivations</th>
          <th scope="col">Comments</th>
        </tr>
      </thead>
      <tbody>
        {% for a in sub_answers %}
          <tr>
            {# param_id viene dall'annotazione nel view #}
            <td>{{ a.param_id }}</td>
            <td>{{ a.question_code }}</td>
            <td>{{ a.response_text }}</td>
            <td>{{ a.mot_text }}</td> 
            <td>{{ a.comments }}</td>
          </tr>
        {% empty %}
          <tr><td colspan="5">No answers</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <h3>Language examples</h3>
  <div class="table-responsive">
    <table class="table table-sm">
      <thead>
        <tr>
          <th scope="col">Question</th>
          <th scope="col">Example text</th>
          <th scope="col">Transliteration</th>
          <th scope="col">Gloss</th>
          <th scope="col">English translation</th>
          <th scope="col">Reference</th>
        </tr>
      </thead>
      <tbody>
        {% for e in sub_examples %}
          <tr>
            <td>{{ e.question_code }}</td>
            <td>{{ e.textarea }}</td>
            <td>{{ e.transliteration }}</td>
            <td>{{ e.gloss }}</td>
            <td>{{ e.translation }}</td>
            <td>{{ e.reference }}</td>
          </tr>
        {% empty %}
          <tr><td colspan="6">No examples</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% endblock %}
