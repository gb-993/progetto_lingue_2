{% extends "base.html" %}
{% block title %}Parameters{% endblock %}
{% block breadcrumb %}Parameters{% endblock %}

{% block content %}

<header class="dashboard-hero">
  <h1>Parameters</h1>
</header>

{% include "_toolbar_search.html" with q=request.GET.q placeholder="Search a parameter…" add_url="parameter_add" add_label="Add a new parameter" %}

  <h2 id="table-heading" class="sr-only">Parameter list</h2>

  <table class="table" role="table" aria-describedby="table-caption">
    <caption id="table-caption" class="sr-only">
      Ordered parameters with position, label, name, questions, stop count, status and actions.
      {% if parameters %} Total items: {{ parameters|length }}.{% endif %}
    </caption>
    <thead>
      <tr>
        <!--<th scope="col">Position</th> -->
        <th scope="col">Label</th>
        <th scope="col">Name</th>
        <th scope="col">Schema</th>   
        <th scope="col">Type</th>
        <th scope="col">#Q</th>
        <th scope="col">#SQ</th>
        <th scope="col">Status</th>
        <th scope="col">Actions</th>
      </tr>
    </thead>

    <tbody>
      {% for p in parameters %}
      <tr>
        {# NB: su mobile ogni cella mostra l’etichetta tramite data-label #}
        <!--<td data-label="Position">{{ p.position }}</td> -->
        <td data-label="Label">{{ p.id }}</td>
        <td data-label="Name">{{ p.name }}</td>
        <td data-label="Schema">{{ p.schema|default:"—" }}</td>
        <td data-label="Type">{{ p.param_type|default:"—" }}</td>
        <td data-label="#Q">{{ p.questions_count }}</td>
        <td data-label="#Stop">{{ p.stop_count }}</td>
        <td data-label="Status">
          {% if p.is_active %}
            <span  aria-label="Status: Active">Active</span>
          {% else %}
            <span  aria-label="Status: Disabled">Disabled</span>
          {% endif %}
        </td>
        <td data-label="Actions" class="row-actions">
          <a class="btn" href="{% url 'parameter_edit' p.id %}" aria-label="Modify parameter {{ p.id }}">
            Modify<span class="sr-only"> parameter {{ p.id }}</span>
          </a>
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="7">
          <p class="muted" role="status" aria-live="polite">No parameters found.</p>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}
