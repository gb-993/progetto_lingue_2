{% extends "base.html" %}
{% block title %}Motivations{% endblock %}
{% block breadcrumb %}
  <li>
    <a href="{% url 'parameter_list' %}">Parameters</a>
  </li>

  <li aria-current="page">Motivations {{ p.id }}</li>
{% endblock %}
{% block content %}
<section class="card">
  <h2>Motivations</h2>

  <form method="post" class="grid" style="grid-template-columns:repeat(auto-fit,minmax(min(260px,100%),1fr)); gap:1rem; align-items:end; margin-bottom:1rem;">
    {% csrf_token %}
    <input type="hidden" name="action" value="add_motivation">

    <div class="form-row">
      <label for="mot-new-code">Label</label>
      <input id="mot-new-code" class="form-control" name="code" required placeholder="">
    </div>

    <div class="form-row" style="grid-column:1 / -1;">
      <label for="mot-new-label">Description</label>
      <textarea id="mot-new-label" class="form-control" name="label" rows="2" required placeholder="Describe this motivation..."></textarea>
    </div>

    <div class="actions" style="grid-column:1 / -1; text-align: right;">
      <button class="btn btn--primary" type="submit">Add a new motivation</button>
    </div>
  </form>

  <table class="table" style="margin-top:.75rem;">
    <thead>
      <tr>
        <th>Label</th>
        <th>Description</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      {% for m in motivations %}
      <tr>
        <td>{{ m.code }}</td>
        <td>{{ m.label }}</td>
        <td style="text-align:right;">
          <form method="post" style="display:inline" onsubmit="return confirm('Delete this motivation?');">
            {% csrf_token %}
            <input type="hidden" name="action" value="del_motivation">
            <input type="hidden" name="id" value="{{ m.id }}">
            <button class="btn btn--danger" type="submit">Delete</button>
          </form>
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="3">
          <p class="muted">No motivations yet.</p>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <p class="muted" style="margin-top:.75rem;">
    Deleting a motivation that is already in use may fail if it is referenced by existing answers.
  </p>
</section>
{% endblock %}
