{% extends "base.html" %}
{% block title %}Glossary{% endblock %}
{% block breadcrumb %}Glossary{% endblock %}

{% block content %}
{% if is_admin %}
  {% include "_toolbar_search.html" with q=q placeholder="Search word or description…" add_url="glossary_add" add_label="Add new word" %}
{% else %}
  {% include "_toolbar_search.html" with q=q placeholder="Search word or description…" %}
{% endif %}



  {% if page_obj.object_list %}
    <div class="card">
      <table class="table">
        <thead>
          <tr>
            <th scope="col">Word</th>
            <th scope="col">Description</th>
            <th scope="col" class="fit"></th>
          </tr>
        </thead>
        <tbody>
        {% for obj in page_obj.object_list %}
          <tr>
            <td>
              <a href="{% url 'glossary_view' obj.word %}">{{ obj.word }}</a>
            </td>
            <td>{{ obj.description|default:"" }}</td>
            <td class="fit">
              {% if is_admin %}
                <a class="btn" href="{% url 'glossary_edit' obj.word %}">Edit</a>
                <form method="post" action="{% url 'glossary_delete' obj.word %}" style="display:inline">
                  {% csrf_token %}
                  <button class="btn btn--bad"
                          aria-label="Delete {{ obj.word }}"
                          onclick="return confirm('Eliminare definitivamente &quot;{{ obj.word }}&quot;?')">
                    Delete
                  </button>
                </form>
              {% endif %}
            </td>
          </tr>
        {% endfor %}
        </tbody>
      </table>
    </div>

    {# pagination #}
    {% if page_obj.paginator.num_pages > 1 %}
      <nav class="pagination" role="navigation" aria-label="Pagination">
        {% if page_obj.has_previous %}
          <a class="btn" href="?q={{ q }}&page={{ page_obj.previous_page_number }}">Previous</a>
        {% endif %}
        <span class="muted">Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}</span>
        {% if page_obj.has_next %}
          <a class="btn" href="?q={{ q }}&page={{ page_obj.next_page_number }}">Next</a>
        {% endif %}
      </nav>
    {% endif %}
  {% else %}
    <div class="muted">No words found.</div>
  {% endif %}
{% endblock %}
