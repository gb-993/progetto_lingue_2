{% extends "base.html" %}
{% block title %}Languages{% endblock %}
{% block breadcrumb %}Languages{% endblock %}
{% block content %}

{% if is_admin %}
  {% include "_toolbar_search.html" with q=q placeholder="Search languages…" add_url="language_add" add_label="Add language" %}
{% else %}
  {% include "_toolbar_search.html" with q=q placeholder="Search languages…" %}
{% endif %}


  <div class="card">
    <table class="table">
      <thead>
        <tr>
          <th scope="col">Label</th>
          <th scope="col">Position</th>
          <th scope="col">Name</th>
          <th scope="col">Glottocode</th>
          <th scope="col">ISO</th>
          <th scope="col">Group</th>
          <th scope="col">Supervisor</th>
          <th scope="col">Informant</th>
          <th scope="col" class="sr-only">Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for l in languages %}
        <tr>
          <td>{{ l.id }}</td>
          <td>{{ l.position }}</td>
          <td>{{ l.name_full }}</td>
          <td>{{ l.glottocode }}</td>
          <td>{{ l.isocode }}</td>
          <td>{{ l.grp }}</td>
          <td>{{ l.supervisor }}</td>
          <td>{{ l.informant }}</td>
          <td class="row-actions">
            <a class="btn" href="{% url 'language_data' l.id %}">Data</a>
            {% if is_admin %}
              <a class="btn" href="{% url 'language_edit' l.id %}">Modify</a>
              {# nuovo link per debug parametri #}
              <a class="btn" href="{% url 'language_debug' l.id %}">Debug</a>
            {% endif %}
          </td>

        </tr>
        {% empty %}
          <tr><td colspan="8" class="muted">No languages</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  {% if page_obj %}
  <nav class="pagination" aria-label="Pagination">
    {% if page_obj.has_previous %}
      <a class="btn" href="?q={{ q }}&page={{ page_obj.previous_page_number }}">Previous</a>
    {% endif %}
    <span class="muted">Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}</span>
    {% if page_obj.has_next %}
      <a class="btn" href="?q={{ q }}&page={{ page_obj.next_page_number }}">Next</a>
    {% endif %}
  </nav>
  {% endif %}
{% endblock %}
